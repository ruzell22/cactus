name: AreTheTypesWrong scan

on: 
  push:
    # Publish `main` as Docker `latest` image.
    branches:
      - main

    # Publish `v1.2.3` tags as releases.
    tags:
      - v*
  pull_request:
    branches:
      - main

jobs:
  scanning:
    name: AreTheTypesWrong scan
    runs-on: ubuntu-22.04
    steps:
      - name: Installing Library
        run: npm i -g @arethetypeswrong/cli
      # - name: Building repository
      #   run: yarn && yarn install && yarn run configure
      - name: Running AreTheTypesWrong scan
        run: TS_NODE_PROJECT=./tools/tsconfig.json node --trace-deprecation --experimental-modules --abort-on-uncaught-exception --loader ts-node/esm --experimental-specifier-resolution=node ./tools/custom-checks/run-attw-on-tgz.ts